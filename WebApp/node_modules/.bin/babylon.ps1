#!/usr/bin/env pwsh

$scriptDir = Split-Path $MyInvocation.MyCommand.Definition -Parent
$exeSuffix = if ($PSVersionTable.PSVersion -lt "6.0" -or $IsWindows) { ".exe" } else { "" }
$babylonPath = Join-Path $scriptDir "../babylon/bin/babylon.js"

if (Test-Path (Join-Path $scriptDir "node$exeSuffix")) {
    & (Join-Path $scriptDir "node$exeSuffix") $babylonPath @args
    exit $LASTEXITCODE
}

if (Test-Path (Join-Path $scriptDir "node")) {
    & (Join-Path $scriptDir "node") $babylonPath @args
    exit $LASTEXITCODE
}

Write-Error "Node.js executable not found in $scriptDir or its parent directory."
exit 1
