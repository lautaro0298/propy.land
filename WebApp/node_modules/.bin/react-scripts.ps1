#!/usr/bin/env pwsh

$basedir = Split-Path $MyInvocation.MyCommand.Definition -Parent
$exe = if ($PSVersionTable.PSVersion -lt "6.0" -or $IsWindows) { ".exe" } else { "" }
$args = @()
if ($MyInvocation.UnboundArguments.Count -gt 0) {
    $args = $MyInvocation.UnboundArguments
}

$nodeExePath = "$basedir/node$exe"
if (Test-Path $nodeExePath) {
    & "$nodeExePath" "$basedir/../react-scripts/bin/react-scripts.js" @args
    $ret = $LASTEXITCODE
} else {
    Write-Error "Node.js executable not found at '$nodeExePath'"
    $ret = 1
}

exit $ret
